\documentclass[12pt,a4paper]{report}
\usepackage[latin1]{inputenc}
\usepackage[norsk]{babel}
\usepackage{verbatim}
\usepackage{alltt}
\usepackage{graphicx}

% to reduce indent
\setlength{\parindent}{0pt}
%\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
%

\title{Produktdokumentasjon}
\begin{document}

\tableofcontents


\section*{Forord}
Her kommer forordet. Hvem er dette for osv

\chapter{Beskrivelse av programmet}
Hva det gjør?
LCFGvisualizer er et program som gjør om masse tekst til et 3d-bilde.

\section{Teknologi}
Her vil de forskjellige teknologiene som er brukt i systemet bli beskrevet.

\subsection{Perl}
Perl er et dynamisk programmeringsspråk laget først og fremst for rask tekstmanipulasjon. Det har blitt inspirert av språk som C, AWK og Lisp, og er i disse dager brukt til en bred mengde arbeidsoppgaver - for eksempel nettverksprogrammering, brukergrensesnitt, webgrensesnitt og mer. Perl har mange innebygde moduler som man kan dra nytte av, og CPAN (Comprehensive Perl Archive Network) tilbyr mange tredjeparts moduler, som kan forbedre og forenkle forskjellige oppgaver.

\subsection{CGI}
Common Gateway Interface (CGI) er en standard for å gi et grensesnitt mellom en ekstern applikasjon og en informasjonsserver (for eksempel en HTTP-server). Et CGI-program blir eksekvert i samtid, noe som gir muligheten til å vise dynamisk informasjon.

Ved å dra nytte av den innebygde CGI-modulen til Perl, gir det muligheten til å lage og vise dynamiske websider.

\subsection{HTML}
HyperText Markup Language (HTML) er brukt til å publisere dokumenter på web, og er sammensatt av kode og tagger som en nettleser tolker.

\subsection{VRML}
Virtual Reality Modelling Language (VRML) er et språk hvor man definerer scener, som gir en bruker muligheten til å bevege seg rundt i et tredimensjonalt miljø. VRML er mye brukt til å legge til tredimensjonale effekter på en webside. 

\subsection{MySQL}
MySQL (My Structured Query Language) er en databasemotor som sitter som et lag oppe på en SQL (Structured Query Language) database. MySQL brukes til å gi et grensesnitt mellom bruker og database, hvor man kan aksessere, endre og prosessere data i en database.

Perl har en innebygd modul kalt DBI (database interface) som kan tolke flere typer databasespråk, og det kan bruke MySQL til å kjøre spørringer og transaksjoner mot en database.

\subsection{Apache}
Apache er en web server som kan bli konfigurert til å kjøre CGI-programmer og MySQL på.

\section{Sentrale datastrukturer}

\subsection{Database}


%I vårt program har også ukjente verdier i databasen en betydning for oss.
\section{Oppbygning av programmet}

XML-filene inneholder mye konfigurasjonsinformasjon, og det er ikke alle komponentene man ønsker å visualisere. I data import delen av programmet, blir det valgt ut ønskede komponenter til visualisering. De foretrukne komponentene blir lagt inn i en database, og er ved hjelp dataimportereren ferdigstilt til å bli grafisk fremstilt.

\subsection{DataImporter}

Den lokale konfigurasjonsfilen inneholder de komponenter som skal bli ekstrahert fra XML-filene og bli lagt til i databasen, og namespace som tilhører dem. 

Vår importer henter først ut all informasjon fra config-filen, og redegjør hva som skal bli tabeller og kolonnenavn i databasen. Den sjekker i mot databasen om tabellene eksisterer fra før av, og gjør eventuelle endringer hvis nåværende database ikke samsvarer med konfigurasjonsfilen. Importeren bruker LibXML modulen til å tolke profilfilene. I hver eneste fil er det en obligatorisk komponent som kalles `last\_modified' hvor datoen for siste endring fra LCFG-server er blitt gjort. Denne datoen blir hentet opp av scriptet, og går til neste fil hvis maskin og dato allerede er lagt inn i database. Selvom det er ny dato `last\_modified' i forhold til databasen, trenger vi å forsikre oss om at vi ikke legger inn redundant data. Derfor sjekker scriptet om de nye verdiene allerede ligger der, og legger de til hvis det er nye verdier.

\subsection{DataVisualizer}

\subsubsection{VRML\_Generator}
VRML\_Generator er den største klassen i vårt system, og brukes av alle Visualiseringsmoduler. Klassens hovedoppgave er å generere gyldig VRML-kode basert på attributter og metoder som kalles av Visualiseringsmodulene.
Klassen er delt opp i følgende deler:

\paragraph{Utility methods}
Dette er metoder som kan brukes av enhver visualiseringsteknikk. Typiske funksjoner inkluderer generering av ulike farger og posisjoner, samt konvertering av tekststrenger til gyldig VRML-syntaks.
  
\paragraph{General VRML methods}
Disse metodene er også felles, generiske metoder som returnerer vanlige VRML-noder, blant annet Timer, Transform, Group, Interpolator og Text. 

\paragraph{Proto methods}
Proto-metodene genererer statiske strenger som danner VRML Proto-noder.
Proto-noder er definisjoner som består av en eller flere VRML-noder, felter og Scripts. 
Disse brukes i visualiseringene til å definere utseende og oppførsel til blant annet maskin-noder, viewpoints og menyer.
For en mer utdypende forklaring av VRML-noder og syntax, referer til VRML97 Spec, kilde....

\paragraph{Specific methods for each Visualisation technique}
Denne biten er videre delt opp i en del for hver spesielle teknikk.
Her legges spesifikke metodekall som kun brukes av en enkelt visualisering. 

\section{Visualiseringsproduktene}
Felles for alle visualiseringsteknikkene, er at de tar imot et eller flere felter fra databasen, og danner grupper basert på de forskjellige verdiene som feltene kan ha. En visualisering dannes av ett eller flere slike kriterier, og de ulike teknikkene utformer gruppene visuelt.

\subsection{GroupVisualizer.pm}
\begin{verbatim}
Avhengigheter:

VRML_Generator.pm
DAL.pm

Konstruktør: new()
Antall parametere: 4 påkrevde 
( string tabell, string felt, string tabell2, string felt2) 
+ 3 valgfrie (string tabell3, string felt3, string verdi3)
Viktige metodekall:
generateWorld() - returnerer visualiseringen
makeDefNodes() - genererer nodedefinisjoner 
makeNodes() - genererer alle nodene
\end{verbatim}

Denne klassen lager en visualisering der alle maskinene først blir fargekodet basert på kriterium 1 og plassert rundt en tilhørende grupperingsnode basert på kriterium 2. I tillegg kan man velge å sette et tredje kriterium som blir markert ved at noden er snudd 45 grader og roterer rundt y-aksen. Ved opprettelse av GroupVisualizer-objekter med metoden new() kreves fire parametere som angir tabell og felt for henholdsvis kriterium 1 og 2. Hvis man vil sette det tredje kriteriet, kan man sende med ytterligere tre parametere for å angi tabell, felt og verdi for dette.

Metoden generateWorld() er den hovedmetoden som står for selve visualiseringen. Først henter metoden de nødvendige dataene via DAL.pm, for deretter å generere vrml-filen ved hjelp av metodene makeDefNodes() og makeNodes() i tillegg til klassen VRML\_Generator.

Metoden makeDefNodes() genererer et sett med definisjonsnoder der hver distinkte verdi av kriterium 1 representeres av en farge. Disse nodene brukes som grunnlag for menyen og for farge på hver maskin.

Metoden makeNodes() genererer vrmlkode for alle maskinene. Maskinene blir plassert  i grupper basert på kriterium 2 og definisjonsnodene som ble laget av makeDefNodes() brukes som grunnlag for fargen.  


\subsection{PyramidVisualizer.pm}
\begin{verbatim}
Avhengigheter:

VRML_Generator.pm
DAL.pm

Konstruktør: new()
Antall parametere: 6 ( string tabell, string felt, string verdi,
string tabell2, string felt2, string verdi2)

Viktige metodekall:
generateWorld() -- returnerer visualiseringen
\end{verbatim}
Denne klassen visualiserer grupper i form av en pyramide med tre trinn. Det nederste trinnet representerer alle maskiner som finnes i databasen. Trinnet i midten representerer alle maskiner som oppfyller et gitt kriterium, og det øverste representerer maskinene som både oppfyller kriteriet fra trinn to, samt nok et kriterium. De tre første parametrene som kreves ved opprettelse av et PyramidVisualizer-objekt med metoden new() representerer tabell, felt og verdi i databasen for det første kriteriet som skal tilfredsstilles, mens de tre siste representerer de tilsvarende verdiene for det andre kriteriet. Selve pyramiden genereres fra metoden generateWorld() som først henter ut data fra databasen via modulen DAL.pm, for så å beregne størrelsen på hvert trinn og lage vrml-koden ved hjelp av modulen VRML\_Generator.pm.
Resultatet vises i figur **sett inn fint bilde her**.



\subsection{Nodevisualisering}
I gruppevisualiseringen er det veldig mye informasjon som blir visualisert, og derfor ville vi gå ned på et litt dypere nivå for hver node. Denne visualiseringen skal primært vise forskjeller og likheter mellom to noder.

Det er mange likheter mellom denne visualiseringen og gruppevisualiseringen. Det er ønskelig at mye av den samme koden kan bli gjenbrukt, og visualiseringen skal se nogenlunde lik ut. I første omgang var det tabellene som eksisterer i databasen som skal utgjøre et gitter i visualiseringen. Disse blir hentet ut i fra databasen for hver av de to nodene, og blir slått sammen slik at alle tabellene er på samme plan. Dette vil ligne på gitterløsningen fra gruppevisualiseringen, bortsett fra at de ikke vil være kuler, kun tekst. Komponenter som tilhører de forskjellige tabellene, vil være visualisert som små bokser. Boksene vil være fargelagt etter hvilken node de tilhører. I gitteret vil det være plassert to kuler som skal representere de to nodene (maskinene). Fra disse nodene er det linjer som blir trekt fra noden og til de komponentene som de har. 

I denne visualiseringen tas det høyde for dato. Hvis man har lyst til å visualisere tilstanden til en maskin på et gitt tidspunkt, velger man det i grensesnittet og man får det opp i visualiseringen. Vi har valgt å gjøre det slik at man alltid må visualisere to maskiner. Hvis man har lyst til å se på kun en maskin, må man dessverre velge en vilkårlig andre maskin og bare se vekk i fra de komponentene den har. Det er funksjonalitet i VRML-filen for å klikke vekk de komponentene som kun tilhører den andre maskinen.

\begin{figure}[ht]
\centering
\includegraphics[scale=0.3]{nodevisuallcompsainjarvi.PNG} 
\caption{Nodevisualisering alle komponenter mellom to maskiner} \label{Nodevisualisering1}
\end{figure}


\begin{figure}[ht]
\centering
\includegraphics[scale=0.3]{nodevisudiffcompsainjarvi.PNG} 
\caption{Nodevisualisering forskjellige komponenter mellom to maskiner} \label{Nodevisualisering2}
\end{figure}




\subsection{SpiralVisualizer.pm}

\begin{verbatim}
Avhengigheter:

VRML_Generator.pm
DAL.pm

Konstruktør: new()
Antall parametere: 2 ( string tabell, string felt)
Viktige metodekall:
generateWorld() -- returnerer visualiseringen

Spesielle variable: 
$changeFactor (int)

\end{verbatim}
Denne klassen tar imot et kriterie og genererer en sfære per unike verdi, der sfærens radius bestemmes av antallet maskiner med sammenfallende verdier.
Sfærene plasseres i en spiralform etter størrelse, hvor de største gruppene utgjør sentrum av spiralen.
Dersom det er flere datasett tilgjengelig i databasen, og en økning eller minking av antall enkeltnoder i en gruppe forekommer, vil det animeres en skalering av sfærens radius i henholdsvis positiv eller negativ retning, sortert på dato fra eldste til nyeste konfigurasjon.
I tillegg vil også sfærenes farge endres, dersom det forekommer andre forandringer i konfigurasjonen til nodene som tilhører en gruppe.
Fargeendringen baserer seg på forholdet mellom antall oppdateringer delt på totalt antall maskiner i en gruppe, og det er mulig å endre hvor stort utslaget skal være i farge, ved å endre variabelen \$changeFactor.

Resultatet vises i figur **sett inn fint bilde her**.


\section{DAL.pm}

\begin{verbatim}
Avhengigheter:

DBI 

Konstruktør: new()
Antall parametere: 0
Viktige metodekall:
--??? 
Spesielle variable: 
-pathTilConfigFil...
\end{verbatim}

DAL.pm er systemets Data Access Lag. 
Brukes av dataImporter og dataVisualizer.
Leser inn ønsket konfigurasjonsfil og har ansvaret for 
å returnere resultater fra spørringer, 
i form av arrays eller hasher.

\end{document}
