\documentclass[12pt,a4paper]{report}

% to reduce indent
\setlength{\parindent}{0pt}
%\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
%

\title{Product Documentation}

\begin{document}
\section*{Foreword}
hei
\section*{Description of the program}

LCFGvisualizer is a program..

The program is divided into two seperate parts:
dataImporter and dataVisualizer (figure ..) image

1. dataImporter
This is the part used to parse the XML-profiles, extract the wanted information and export it to a mySQL database. 

2. dataVisualizer
This part connects to the database and generates a visualisation based on which criterias and techiques the user sets.
\tableofcontents
\chapter{User guide}
User guide will be added here...

\chapter{System reference}

\section*{}
This part of the document will contain  documentation needed by developers for maintanence and expansion of the system

\newpage


\section{DataImporter}
Before extracting data into the database, some things should be prepared in a proper way:
The XML-files you want to extract data from should each lie in separate directory for each of the dates.
A database should be up and running, preferrably a mySQL database.
Make sure the system requirements are met (see SRS section further down)
\subsection{XML\_to\_DB}
The config file (vcsd.cfg) in /cfg is used to define the different filepaths and components which are going to be extracted to the database. The databaseinformation, namespace of XML-files, filepath of XML-files, and at least one component needs to be declared before using the XML to DB script. The one mandatory component in vcsd.cfg is an arbitrary child component from components/profile.

When the config file is fully configured, and all the desired components have been declared, the extracting of data into the database can begin. Run the perl file XML\_to\_DB.pl in a terminal or on a commmand line. If everything is configured correctly, this should go smoothly. For each main component this operation takes approximately one minute, depending on the machine and LAN/Internet speed if the database is externally located.

\section{DataVisualizer}

\subsection{GUI}
The GUI consists of the following files and classes: 
\paragraph{cgiFunctions.pm}
Methods for printing HTML elements such as forms, stylesheets, menu, javascripts and embed visualisations.
Dependencies: DAL.pm

\paragraph{cgi scripts}\\
Index.cgi -- Start page \\
nodeVisualisation.cgi \\
pyramidVisualisation.cgi\\
groupVisualisation.cgi\\
spiralVisualisation.cgi\\
Dependencies: CGI

\subsection{BLL}
The business layer.
\subsubsection{Visualisation Library}
 Consists of a library of Visualisation modules, namely:
\subsubsection{GroupVisualizer}

\subsubsection{PyramidVisualizer}

\subsection{SpiralVisualizer}

\subsection{NodeVisualizer}

\subsection{PyramidVisualizer}
This module generates the vrml for the pyramid visualization. 
The pyramid visualizer module depends on the following modules: 

\subsubsection{Method descriptions}

\paragraph{new()}
This method is a constructor generating a new PyramidVisualizer object. Six parameters are required. 
The first three represent the table name, field name and field value for the first criteria query, while the last three represent the same values for the second criteria.

\paragraph{generateWorld()}
This method is responsible for generating the VRML-file for the visualization. 
\begin{itemize}
\item[-]Parameters: none
\item[-]Return value: String
\end{itemize}
First the data is retrieved from DAL, then the size of the steps are calculated before the string for the vrml file is bulit and returned.

\paragraph{hashValueAscendingNum}
Helping method, sorts a hash by its values in ascending order. Uses the global hash \verb"%steps"


\paragraph{hashValueDescendingNum}
Helping method, sorts a hash by its values in descending order. Uses the global hash \verb"%steps"


The visualizer modules depend on the following modules: 
\begin{itemize}
\item[-]
DAL.pm
\item[-]
vrmlGenerator.pm
\end{itemize}

\subsection{VRML\_Generator}

The VRML\_Generator is the largest module and is used by all the visualisation modules. Its main task is to generate valid VRML strings based on the attributes and method calls in the visualisation modules.
It is divided into different parts: 
\paragraph{Utility methods}\\
These are methods which can be used by any visualisation, such as setting color values, generating vector positions, printing routes and converting strings to "VRML-safe" syntax.

\paragraph{General VRML methods}\\
These methods are also generic methods which generates valid VRML code from desired parameters. 
A lot of common VRML nodes can be generated, including Timer, Transform, Group, Interpolator and Text. 
 
\paragraph{Proto methods}\\
Generates valid Proto nodes. (Static strings).
Proto nodes are definitions built by VRML nodes, fields and Scripts.
Used to define MachineNodes, viewpoints and menuitems and their attributes.

\paragraph{Specific methods for each Visualisation technique}\\
Methods used only by one specific visualisation module.

\section{DAL}
The Data Access Layer. \\
Files: DAL.pm \\
Connects to the database. \\
Dependencies: DBI\\

\section*{SRS System Requirement Specification}

\section*{Structure}
	Bilde / visualisering av komponenter og underprogrammer 
	\subsection*{Hardware requirements}
	
	Any newer computer (X86-compatible).

	\subsection*{Software requirements}

	
	Perl \verb#>=# 5.10 with XML::LibXML::XPathContext;
	For windows, the following packages are required to 		parse the XML files:
	\begin{itemize}
		\item[-]
		XML::LibXML
		\item[-]
		XML-LibXML-Common
		\item[-]
		XML-NamespaceSupport
		\item[-]
		XML::SAX 
	\end{itemize}	
	These packages can be retrieved from 
\verb"http://cpan.uwinnipeg.ca/PPMPackages/10xx/"	

	mySQL \verb#>=# 5.0.45
	apache webserver
	
	The client:
	A modern web browser -- tested in IE6, Mozilla Firefox, Opera, Safari .. bla
	VRML browser: recommended Octaga Player 
	
	
	

\section*{Database}


\section*{Installation}
Installation on Windows:

You need to install the following third-party software:

Apache, Perl, mySQL

We recommend installing activestate Perl -- link ,..

Install it to a folder, we will use \verb"C:\perl"

And then install WAMP server  -- -link

Unzip lcfgVisualizer.zip to a desired path, in our example we will use
\verb"C:/lcfgVisualiser/"

go to the folder and edit the .cgi files --- change the first line to reflect the location of your perl.exe file.

In this example, we will use \verb "#!C:\perl\bin\perl.exe -w"

To open for cgi execution in apache, you need the following lines in 
httpd.conf:

In the loadModule section, make sure these lines are not commented:
\begin{verbatim}
LoadModule alias_module modules/mod_alias.so
LoadModule cgi_module modules/mod_cgi.so
\end{verbatim}
in the section \verb"<IfModule alias_module>", add the following lines:
\begin{verbatim}
ScriptAlias /cgi-bin/ "C:/lcfgVisualizer/cgi/"

<Directory "C:/lcfgVisualizer/cgi/">
    AllowOverride None
    Options +ExecCGI Indexes
    Order allow,deny
    Allow from all
	AddHandler cgi-script .cgi .pl
</Directory>
\end{verbatim}

In the root directory of your apache server root ( default .... ), 
make a new folder named output
% vil ikke perl opprette katalogen for oss?
% i linux blir det kanskje et problem med rettigheter på katalog og filer
in cgifunctions.pm
set 
\begin{verbatim}
\$FILEPATH = "E:\\www\\output\\";
\end{verbatim}


\section*{Bugs \& known issues}
BUG: Web browser freezes / crashes
GUI: On some systems, the octaga web browser plugin does not work.
Web browser: Internet Explorer 7.0.5730.11

Solution: Change browser -- use firefox.
Platform: 
Systems running Windows XP SP2, Internet Explorer 7.0.5730.11, Octaga player 2.2.0.12

Issue: Embedded vrml player spiser cpu, har 100 prosent i cpu.
Er dette pga skjermkortdriver feks?


Error hos meg: Embedded VRML worlds does not show up in firefox
Solved --- feil i stien til embeddinga, må ta med .. foran  \$vrmlFile


BUG: Embedded VRML is not updated 
Firefox bruker cache selv om den ikke skal  det, funker ikke å force reload.
Må restarte browser for å få vist en ny visualisering.
Foreløpig løsning: ikke printe ut embeddinga, bare link,
dette hjelper også mot at internet explorer henger hvis man prøver det i IE.


BUG: Some links inside the VRML world does not work
All links point to the same viewpoint. This is a anchor issue with name conventions.. 
- Viewer: Cortona 3D viewer
Platform: All
-Visualisations affected: groupVisualizer,...

Issue: touchSensor is misplaced in VRML Player on Mac OSX.
This means that if an object is linked with a touch sensor, one must click underneath the object to activate the sensor, rather than clicking the actual object. 

Issue: DataImporter. 
If you try to import a dataset of XML files which is older than the currently newest, nothing will be imported. 
Solution: Make sure you import datasets in a correct order, from oldest to latest.

\end{document}